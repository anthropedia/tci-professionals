<template>
  <button on:click="this.showPayment">Proceed</button>
</template>

<script>
  this.handler = StripeCheckout.configure({
    key: 'pk_test_idontexist!',
    image: 'https://assets.tci.anthropedia.org/images/anthropedia.svg',
    locale: 'auto',
    token: async (token) => {
      const response = await api('/payment', token)
      console.info(response.status, response.data)
    }
  })

  this.showPayment = () => {
    this.handler.open({
      name: 'Anthropedia',
      description: '2 TCI tests',
      amount: 2000
    })
  }
</script>

<style>
  .StripeElement {
    background-color: white;
    height: 40px;
    padding: 10px 12px;
    border-radius: 4px;
    border: 1px solid transparent;
    box-shadow: 0 1px 3px 0 #e6ebf1;
    -webkit-transition: box-shadow 150ms ease;
    transition: box-shadow 150ms ease;
  }

  .StripeElement--focus {
    box-shadow: 0 1px 3px 0 #cfd7df;
  }

  .StripeElement--invalid {
    border-color: #fa755a;
  }

  .StripeElement--webkit-autofill {
    background-color: #fefde5 !important;
  }
</style>
